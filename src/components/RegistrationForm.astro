---
import { useTranslations } from '../lib/i18n';

const { currentLocale } = Astro;
const t = useTranslations(currentLocale as 'en' | 'am');
const buttonClasses = "w-full text-white font-bold py-2.5 px-4 rounded-lg transition-all duration-300 ease-in-out disabled:opacity-50 disabled:cursor-not-allowed hover:shadow-lg";
---
<div id="registration-container" class="space-y-6">
    <div class="text-center">
        <h1 class="text-2xl font-bold text-tg-text">{t('register.title')}</h1>
        <p class="text-tg-hint">{t('register.subtitle')}</p>
    </div>

    <form id="registration-form" class="space-y-4">
        <!-- Input fields with updated focus rings -->
        <div>
            <label for="full_name" class="block text-sm font-medium text-tg-text">{t('register.full_name')}</label>
            <input type="text" id="full_name" name="full_name" required class="mt-1 block w-full bg-tg-secondary-bg border border-white/10 rounded-md shadow-sm p-2 text-tg-text focus:ring-2 focus:ring-modern-primary-end focus:border-modern-primary-end" placeholder={t('register.full_name_placeholder')}>
            <p class="text-modern-accent-danger text-xs mt-1 error-message"></p>
        </div>
        <div>
            <label for="age" class="block text-sm font-medium text-tg-text">{t('register.age')}</label>
            <input type="number" id="age" name="age" required min="12" max="60" class="mt-1 block w-full bg-tg-secondary-bg border border-white/10 rounded-md shadow-sm p-2 text-tg-text focus:ring-2 focus:ring-modern-primary-end focus:border-modern-primary-end" placeholder="18">
            <p class="text-modern-accent-danger text-xs mt-1 error-message"></p>
        </div>
        <div>
            <label for="grade" class="block text-sm font-medium text-tg-text">{t('register.grade')}</label>
            <input type="text" id="grade" name="grade" required class="mt-1 block w-full bg-tg-secondary-bg border border-white/10 rounded-md shadow-sm p-2 text-tg-text focus:ring-2 focus:ring-modern-primary-end focus:border-modern-primary-end" placeholder={t('register.grade_placeholder')}>
            <p class="text-modern-accent-danger text-xs mt-1 error-message"></p>
        </div>
        <div>
            <label for="phone" class="block text-sm font-medium text-tg-text">{t('register.phone')}</label>
            <input type="tel" id="phone" name="phone" required class="mt-1 block w-full bg-tg-secondary-bg border border-white/10 rounded-md shadow-sm p-2 text-tg-text focus:ring-2 focus:ring-modern-primary-end focus:border-modern-primary-end" placeholder={t('register.phone_placeholder')}>
            <p class="text-modern-accent-danger text-xs mt-1 error-message"></p>
        </div>
        <div>
            <label for="email" class="block text-sm font-medium text-tg-text">{t('register.email')}</label>
            <input type="email" id="email" name="email" required class="mt-1 block w-full bg-tg-secondary-bg border border-white/10 rounded-md shadow-sm p-2 text-tg-text focus:ring-2 focus:ring-modern-primary-end focus:border-modern-primary-end" placeholder={t('register.email_placeholder')}>
            <p class="text-modern-accent-danger text-xs mt-1 error-message"></p>
        </div>
        <div>
            <label for="receipt" class="block text-sm font-medium text-tg-text">{t('register.receipt')}</label>
            <input type="file" id="receipt" name="receipt" required accept="image/png, image/jpeg, image/webp" class="mt-1 block w-full text-sm text-tg-hint file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-gradient-to-r file:from-modern-primary-start file:to-modern-primary-end file:text-white hover:file:opacity-90 file:transition-opacity">
            <p class="mt-1 text-xs text-tg-hint">{t('register.receipt_help')}</p>
            <p class="text-modern-accent-danger text-xs mt-1 error-message"></p>
        </div>

        <button type="submit" id="submit-button" class:list={[buttonClasses, "bg-gradient-to-r from-modern-primary-start to-modern-primary-end hover:shadow-modern-primary-end/50"]}>
            {t('register.submit')}
        </button>
        <div id="form-error" class="text-modern-accent-danger text-sm text-center"></div>
    </form>
</div>
<div id="success-message" class="hidden text-center p-8 space-y-4">
    <svg class="mx-auto h-12 w-12 text-modern-accent-success" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
    </svg>
    <h2 class="text-2xl font-bold text-tg-text">{t('register.success_title')}</h2>
    <p class="text-tg-hint">{t('register.success_message')}</p>
</div>
<!-- SCRIPT is unchanged, so not re-pasted for brevity. The original script works perfectly with these new classes. -->
<script define:vars={{ t }} is:inline src="/scripts/registration-form.js"></script>